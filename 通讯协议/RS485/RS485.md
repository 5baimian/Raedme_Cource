# RS-485（通常简称“485”）是一种物理层通信标准
```bash
* 特点与应用场景：
特点：
RS-485 只定义物理层和电气特性，不定义通信协议、数据帧格式、地址机制等，常见的 Modbus RTU、Profibus、BACnet MS/TP 等只是“跑在 RS-485 上的协议”

应用：
应用于长距离、抗干扰、多节点通信的场景，解决的是**“信号如何在两根线上可靠传输”**的问题

* 工作原理：
差分信号机制：发送端并不是对地输出电压，而是输出两线之间的电压差。
VA − VB > 200mV  ---逻辑1
VB − VA > 200mV  ---逻辑0
接收端只关心 VA − VB，而不关心它们各自对地的绝对电压

抗干扰原理:
当外部存在电磁干扰时,干扰往往同时作用在 A、B 两根线上,这类干扰称为共模干扰,差分接收器会将共模信号抵消，仅放大差模信号,这就是 RS-485 能在工业环境下稳定通信的根本原因。

* 电气结构与驱动方式
驱动器和接收器:每个 485 节点通常包含差分驱动器（Driver）,差分接收器（Receiver）,在半双工系统中，这两者通常集成在同一芯片中（如 MAX485、SN75176）。

三态输出（关键特性）：
RS-485 驱动器具有三种状态：输出高（驱动 1）、输出低（驱动 0）、高阻态（Hi-Z，不驱动总线），高阻态使得多个设备可以并联在同一条总线上，而不会发生电气冲突。

* 总线拓扑与多节点通信
总线型结构：
RS-485 采用总线拓扑（Bus Topology）：所有设备并联在同一对 A/B 线上，不推荐星型、环型连接（易产生反射）。
多节点能力：
标准 RS-485：32 个单位负载，现代芯片（1/4 UL、1/8 UL）：可达 128 或 256 节点

* 终端匹配与信号完整性
终端电阻的作用：由于 485 用于长线传输，导线具有传输线特性，若阻抗不匹配，会产生信号反射，反射会导致边沿畸变、误码，在总线两端并联120欧姆终端电阻，仅在物理总线最两端使用。

* 通信模式：半双工与全双工
半双工（最常见）：
使用一对 A/B 线，同一时间只能发送或接收。

全双工：
使用两对差分线（发送对 + 接收对），可同时收发。

* 总结：
RS-485 通过差分信号传输、三态驱动和总线拓扑，在同一对双绞线上实现长距离、高抗干扰、多节点的串行通信，其可靠性来自于差分放大、阻抗匹配和总线控制机制。

“半双工”是指不能同时双向传输有效信息，并不代表不能听到自己的声音。对于大多数 USB 转 485 模块，默认是听得到自己说话的。建议你在写代码时默认假设存在回显，利用协议特征（如标志位）来过滤它，这样代码最健壮。
```